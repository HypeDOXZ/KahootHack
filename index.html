<!DOCTYPE html>
<html><head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Kahoot Hack v2 - 2026 Protocol</title>
<style>body{font-family:Arial;max-width:700px;margin:50px auto;padding:20px;background:#f0f2f5}
input{padding:15px;font-size:20px;width:250px;border:2px solid #007bff;border-radius:8px}
button{padding:15px 30px;font-size:18px;background:#28a745;color:white;border:none;border-radius:8px;cursor:pointer;font-weight:bold}
#status{margin:20px 0;padding:15px;background:white;border-radius:8px;border-left:5px solid #007bff;font-size:16px}
.log{padding:10px;margin:5px 0;background:#e9ecef;border-radius:5px;font-family:monospace;font-size:14px}
.question{margin:20px 0;padding:20px;background:#d4edda;border-radius:10px;border-left:5px solid #28a745}
.answer{padding:10px;margin:5px 0;background:white;border-radius:5px}
.correct{background:#28a745 !important;color:white !important;font-weight:bold !important}
</style></head><body>
<h1>üéÆ Kahoot Hack 2026</h1>
<input type="text" id="pin" placeholder="Game PIN" maxlength="7" style="text-transform:uppercase">
<button onclick="joinGame()">üöÄ Get Answers</button>
<div id="status">PIN ‚Üí Extract</div>
<div id="debug"></div><div id="quiz"></div>

<script>
let ws=null,gamePin='',logs=[],questions=[];
const debugDiv=document.getElementById('debug');

function addLog(msg,color='black'){
logs.push(msg);debugDiv.innerHTML=logs.slice(-15).map(l=>`<div class="log" style="color:${color}">${l}</div>`).join('');
}

async function joinGame(){
gamePin=document.getElementById('pin').value.trim().toUpperCase();
if(gamePin.length<6){addLog('‚ùå 6-7 chars','red');return;}
addLog(`üîÑ PIN: ${gamePin}`,'blue');

// Step 1: Get fresh auth token via public API
try{
const tokenResp=await fetch(`https://kahoot.it/reserve/session/${gamePin}/123456789`,{method:'PUT'});
const sessionData=await tokenResp.json();
addLog('‚úÖ Session token OK','green');

// Step 2: New v2 WebSocket
const wsUrl=`wss://kahoot.it/v2/cometd/${gamePin}?token=${sessionData.token}`;
addLog('üîó New WS v2','blue');
ws=new WebSocket(wsUrl);

ws.onopen=()=>{
addLog('‚úÖ v2 Connected!','green');
ws.send(JSON.stringify({
channel:'/meta/handshake',
version:'1.0',
supportedConnectionTypes:['websocket'],
clientId:sessionData.clientId
}));
ws.send(JSON.stringify({
channel:'/service/controller',
data:{
gameid:gamePin,
host:'kahoot.it',
session:sessionData.token,
joinTime:Date.now()
}
}));
};

ws.onmessage=e=>{
addLog(`üì¶ Data: ${e.data.slice(0,80)}`,'purple');
parseData(JSON.parse(e.data));
};

ws.onerror=()=>addLog('‚ùå WS Error','red');
}catch(e){addLog('‚ùå API fail: '+e,'red');}
}

function parseData(data){
if(!data?.data?.quizQuestions)return;
(data.data.quizQuestions||[]).forEach(q=>{
const question={
text:q.question,
answers:q.choices?.map(c=>({text:c.answer,correct:c.correct}))||[]
};
if(question.answers.length){
questions.push(question);
showQuiz();
addLog(`‚úÖ Q${questions.length}: ${question.text.slice(0,40)}`,'green');
}
});
}

function showQuiz(){
let h='<h2>‚úÖ ANSWERS:</h2>';
questions.forEach((q,i)=>h+=`<div class="question"><b>Q${i+1}:</b> ${q.text}<div>${q.answers.map(a=>`<div class="answer ${a.correct?'correct':''}">üìç ${a.text}</div>`).join('')}</div></div>`);
document.getElementById('quiz').innerHTML=h;
}
</script></body></html>
